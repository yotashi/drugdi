<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æ¯’å“è¦é€å“ª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f4f4f9;
    }
    h1 {
      text-align: center;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      font-weight: bold;
      display: block;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      width: 100%;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background-color: #45a049;
    }
    .result {
      margin-top: 20px;
      padding: 10px;
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
      border-radius: 5px;
      color: #721c24;
    }
    .result-answer {
      font-size: 18px;
      font-weight: bold;
      color: #d9534f;
    }
    .refresh-text {
      font-size: 16px;
      color: #6c757d;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>æ¯’å“è¦é€å“ª</h1>

  <div class="form-group">
    <label for="isMixed">æ˜¯å¦ç‚ºæ··åˆå¼æ¯’å“ï¼Ÿ</label>
    <select id="isMixed">
      <option value="yes" selected>æ˜¯</option>
      <option value="no">å¦</option>
    </select>
  </div>

  <div class="form-group" id="quantityGroup">
    <label for="quantity">ç¸½æ•¸é‡ï¼š</label>
    <input type="number" id="quantity" placeholder="è«‹è¼¸å…¥ç¸½æ•¸é‡"/>
  </div>

  <div class="form-group" id="drugTypeGroup" style="display:none;">
    <label for="drugType">æ¯’å“ç¨®é¡ç´šæ•¸ï¼ˆ1-4ï¼‰ï¼š</label>
    <input type="number" id="drugType" min="1" max="4" placeholder="è«‹è¼¸å…¥1è‡³4çš„æ•¸å­—"/>
  </div>

  <div class="form-group" id="amountGroup" style="display:none;">
    <label for="amount">å…‹æ•¸ï¼š</label>
    <input type="number" id="amount" placeholder="è«‹è¼¸å…¥å…‹æ•¸"/>
  </div>

  <div class="form-group" id="drugOptionsGroup" style="display:none;">
    <label for="drugOptions">é¸æ“‡æ¯’å“é¡å‹ï¼š</label>
    <select id="drugOptions"></select>
  </div>

  <div class="form-group options-group" id="otherDrugOptionsGroup" style="display:none;">
    <label for="otherDrugOptions">é¸æ“‡æ¯’å“ç¨®é¡ï¼š</label>
    <select id="otherDrugOptions">
      <option value="1">æ„·ä»–å‘½ã€ç¡ç”²è¥¿æ³®</option>
      <option value="2">å…¶ä»–</option>
    </select>
  </div>

  <button onclick="checkDrug()">æäº¤</button>

  <div id="result" class="result" style="display:none;">
    <div class="result-answer" id="resultAnswer"></div>
    <div class="refresh-text" id="refreshText"></div>
  </div>
</div>
<!-- ğŸ”— Google Drive é€£çµå€å¡Š -->
<div style="text-align: center; margin-top: 30px;">
  <p><strong>666æŠ½æ¨£åŠåˆ†å·¥è¡¨åœ¨ä»¥ä¸‹é€£çµï¼š</strong></p>
  <a href="https://drive.google.com/drive/folders/1ovJWlgRgYDq2LlylBGwLd-gxTz-2kgQL" target="_blank">
    ğŸ‘‰ é»æˆ‘å‰å¾€ Google Drive è³‡æ–™å¤¾
  </a>
</div>

<script>
  const isMixedEl = document.getElementById('isMixed');
  const quantityGroup = document.getElementById('quantityGroup');
  const drugTypeGroup = document.getElementById('drugTypeGroup');
  const amountGroup = document.getElementById('amountGroup');
  const drugOptionsGroup = document.getElementById('drugOptionsGroup');
  const otherDrugOptionsGroup = document.getElementById('otherDrugOptionsGroup');
  const resultAnswerDiv = document.getElementById('resultAnswer');
  const refreshTextDiv = document.getElementById('refreshText');
  const resultDiv = document.getElementById('result');

  isMixedEl.addEventListener('change', function () {
    const isMixed = this.value;
    quantityGroup.style.display = isMixed === 'yes' ? 'block' : 'none';
    drugTypeGroup.style.display = isMixed === 'no' ? 'block' : 'none';
    amountGroup.style.display = isMixed === 'no' ? 'block' : 'none';
    drugOptionsGroup.style.display = 'none';
    otherDrugOptionsGroup.style.display = 'none';
    resultDiv.style.display = 'none';
  });

  function updateDrugOptionsLazy(optionValues) {
    const optionsMap = {
      '1': 'å¤§éº»é¡',
      '2': 'å¤æŸ¯é¡',
      '3': 'ç”²åŸºå®‰éä»–å‘½é¡',
      '4': 'éå±¬ä»¥ä¸Š'
    };
    const drugOptions = document.getElementById('drugOptions');
    drugOptions.innerHTML = '<option disabled selected>è«‹é¸æ“‡æ¯’å“é¡å‹</option>';
    drugOptionsGroup.style.display = 'block';

    let loaded = false;
    drugOptions.addEventListener('click', function () {
      if (loaded) return;
      optionValues.forEach(val => {
        const opt = document.createElement('option');
        opt.value = val;
        opt.textContent = optionsMap[val];
        drugOptions.appendChild(opt);
      });
      loaded = true;
    });

    drugOptions.onchange = function () {
      const selected = this.value;
      if (selected === '1' || selected === '2') resultAnswerDiv.textContent = 'èª¿æŸ¥å±€ã€‚';
      else if (selected === '3') resultAnswerDiv.textContent = 'èˆªé†«ã€‚';
      else resultAnswerDiv.textContent = 'åˆ‘äº‹å±€ã€‚';

      if (resultAnswerDiv.textContent !== '') refreshTextDiv.textContent = 'è«‹é‡æ–°åˆ·æ–°';
    };
  }

  function checkDrug() {
    resultDiv.style.display = 'block';
    drugOptionsGroup.style.display = 'none';
    otherDrugOptionsGroup.style.display = 'none';
    resultAnswerDiv.textContent = '';
    refreshTextDiv.textContent = '';

    const isMixed = isMixedEl.value;

    if (isMixed === 'yes') {
      const quantity = parseFloat(document.getElementById('quantity').value);
      if (!quantity || quantity <= 0) {
        resultAnswerDiv.textContent = 'è«‹è¼¸å…¥æœ‰æ•ˆçš„ç¸½æ•¸é‡ã€‚';
        return;
      }
      if (quantity < 10) resultAnswerDiv.textContent = 'é€èˆªé†«ã€‚';
      else if (quantity < 500) resultAnswerDiv.textContent = 'æŠ½æ¨£å¾Œé€èˆªé†«ã€‚';
      else resultAnswerDiv.textContent = 'æŠ½æ¨£å¾Œé€åˆ‘äº‹å±€ã€‚';
    } else {
      const drugType = parseInt(document.getElementById('drugType').value);
      const amount = parseFloat(document.getElementById('amount').value);
      if (!amount || amount <= 0 || drugType < 1 || drugType > 4 || !Number.isInteger(drugType)) {
        resultAnswerDiv.textContent = 'è«‹æª¢æŸ¥ç´šæ•¸æˆ–é‡é‡è¼¸å…¥æ˜¯å¦æ­£ç¢ºã€‚';
        return;
      }

      if (drugType === 1 && amount <= 1) resultAnswerDiv.textContent = 'é€èˆªé†«ã€‚';
      else if (drugType === 1 && amount > 1) resultAnswerDiv.textContent = 'èª¿æŸ¥å±€ã€‚';
      else if (drugType === 2 && amount > 1 && amount <= 10) resultAnswerDiv.textContent = 'æœ¬å±€é‘‘è­˜ä¸­å¿ƒã€‚';
      else if (drugType === 2 && amount > 10 && amount <= 100) updateDrugOptionsLazy(['1', '2', '3', '4']);
      else if (drugType === 2 && amount > 100) updateDrugOptionsLazy(['1', '2', '4']);
      else if ((drugType === 3 || drugType === 4) && amount > 100) resultAnswerDiv.textContent = 'åˆ‘äº‹å±€ã€‚';
      else if ((drugType === 3 || drugType === 4) && amount > 1 && amount <= 20) resultAnswerDiv.textContent = 'èˆªé†«ã€‚';
      else if ((drugType === 3 || drugType === 4) && amount > 20 && amount <= 100) {
        otherDrugOptionsGroup.style.display = 'block';
        document.getElementById('otherDrugOptions').onchange = function () {
          const val = this.value;
          resultAnswerDiv.textContent = val === '1' ? 'èˆªé†«ã€‚' : 'åˆ‘äº‹å±€ã€‚';
          refreshTextDiv.textContent = 'è«‹é‡æ–°åˆ·æ–°';
        };
      } else resultAnswerDiv.textContent = 'åˆ‘äº‹å±€ã€‚';
    }

    if (resultAnswerDiv.textContent !== '') refreshTextDiv.textContent = 'è«‹é‡æ–°åˆ·æ–°';
  }
</script>
</body>
</html>


